CREATE OR REPLACE FUNCTION XML_EXTRACT_NO_EXCEPTION
( p_xml IN XMLTYPE
, p_xpath IN VARCHAR2
) RETURN VARCHAR2 AS
BEGIN
RETURN CASE WHEN P_XML.EXTRACT(P_XPATH) IS NOT NULL
then p_xml.extract(p_xpath || '/text()').getstringval()
else NULL
END;
END XML_EXTRACT_NO_EXCEPTION;

