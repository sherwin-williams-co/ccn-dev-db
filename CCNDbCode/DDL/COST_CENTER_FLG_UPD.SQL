-- created by rxv940 on 12/11/2017
-- run this in Utils
-- one time script to turn the flag on for few cost centers (Ellen req)


ALTER TRIGGER TR_COST_CENTER_UPD DISABLE;

UPDATE COST_CENTER 
   SET POS_DOWNLOAD_CC_IND = 'Y' 
 WHERE COST_CENTER_CODE IN ('727614','701829','701824','721386','701825','725018','728110');
 
COMMIT;

ALTER TRIGGER TR_COST_CENTER_UPD ENABLE;

-- Finally check
SELECT * FROM COST_CENTER 
 WHERE COST_CENTER_CODE IN ('727614','701829','701824','721386','701825','725018','728110');
 
--priority update in production for territory polling downloads 
--jxc517 12/12/2017
ALTER TRIGGER TR_COST_CENTER_UPD DISABLE;

UPDATE COST_CENTER
   SET POS_DOWNLOAD_CC_IND = 'Y'
 WHERE COST_CENTER_CODE IN (SELECT COST_CENTER_CODE
                              FROM COST_CENTER
                             WHERE CATEGORY = 'T'
                               AND CLOSE_DATE IS NULL
                             MINUS
                            SELECT COST_CENTER_CODE
                              FROM COST_CENTER
                             WHERE CATEGORY = 'T'
                               AND POS_DOWNLOAD_CC_IND = 'Y'
                               AND CLOSE_DATE IS NULL)
   AND POS_DOWNLOAD_CC_IND IS NULL;

--'75Q727','75Q830','75Q922','75R004','75R005','75R016','75R017','75R023','75R025','75R026','75R027','75R028','75R029','75R030','75R032','75R033','75R034','75R035','75R036','75R037','75R052','75R058','75R060','75R149','75R151','75R155','75R161','75R163','75R164','75R167','75R173','75R174','75R176','75R177','75R178','75R179','75R180','75R181','75R182','75R185','75R186','75R187','75R188','75R189','75R204','75R205','75R206','75R207','75R208','75R209','75R210','75R211','75R212','75R213','75R214','75R215','75R230','75R231','75R232','75R233','75R234','75R235','75R237','75R238','75R239','75R240','75R241','75R242','75R243','75R244','75R245','75R247','75R251','75R252','75R253','76R084','76R085','76R087','76R088','76R089','76R090'

UPDATE COST_CENTER
   SET POS_DOWNLOAD_CC_IND = NULL
 WHERE COST_CENTER_CODE = '76Q333'
   AND POS_DOWNLOAD_CC_IND = 'Y';

ALTER TRIGGER TR_COST_CENTER_UPD ENABLE;

-- Based on email from Pat we should not include these below cost centers (Territory Reps) for polloing downloads
-- jxc517 12/13/2017
ALTER TRIGGER TR_COST_CENTER_UPD DISABLE;

UPDATE COST_CENTER
   SET POS_DOWNLOAD_CC_IND = NULL
 WHERE COST_CENTER_CODE IN ('776531','76Q333','76Q364','76Q414','76Q513','76Q546')
   AND POS_DOWNLOAD_CC_IND = 'Y';

ALTER TRIGGER TR_COST_CENTER_UPD ENABLE;