head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2012.10.01.19.57.21;	author sw\kdp465;	state Exp;
branches;
next	1.1;
deltatype	text;
kopt	kv;
permissions	666;
commitid	1ab05069f5a01507;
filename	errpkg.pkg;

1.1
date	2012.04.23.21.23.02;	author sw\kdp465;	state Exp;
branches;
next	;
deltatype	text;
kopt	kv;
permissions	666;
commitid	17f04f95c8353332;
filename	errpkg.pkg;


desc
@@


1.2
log
@err table update
Committed on the Free edition of March Hare Software CVSNT Server.
Upgrade to CVS Suite for more features and support:
http://march-hare.com/cvsnt/
@
text
@CREATE OR REPLACE
PACKAGE body errpkg
/*********************************************************** 
This package will hold all procedures/functions used to process business
and system errors throughout the entire CCN applications

created : 12/02/11 blr CCN project
revisions: 

************************************************************/
IS

PROCEDURE raise_err (
/*********************************************************** 
This procedure will raise errors to the calling procedure/application
depending on the error number input data. 


created : 12/02/11 blr CCN project
revisions: 

************************************************************/
err_in IN INTEGER, 
err_proc_in IN VARCHAR2
,err_text_in IN VARCHAR2 := NULL) 
IS
BEGIN
/*
   All calls to raise errors will be sent errtext to get correct text to return
   	using errtext();
	genral Layout: 
		if application error: -20000 to -29999
			..any special processing  for specific numbers
			then will raise applicaiton error
			
		if system error....
		..any special processing  for specific numbers		
		raise to calling object.....
*/

  --this is just an example of how procedure can be used
  IF err_in BETWEEN -20998 AND -20000 THEN
  
    RAISE_APPLICATION_ERROR (err_in, errtext(err_in, err_proc_in, err_text_in));
   
  ELSIF err_in IN (100, -1403) THEN
    RAISE NO_DATA_FOUND;
  ELSIF err_in = -20999 THEN
    RAISE_APPLICATION_ERROR (err_in, errtext(err_in, err_proc_in, err_text_in));
  ELSE
  /*********************************************************** 
  This is an example of how to raise an unknown error...doesn't need to be used.....
  
  created : 12/02/11 blr CCN project
  revisions: 
  ***********************************************************/ 
    EXECUTE IMMEDIATE(
    'DECLARE myexc EXCEPTION; ' ||
    ' PRAGMA EXCEPTION_INIT (myexc, ' ||
    TO_CHAR (err_in) || ');' ||
    'BEGIN RAISE myexc; END;'
    );
    
    
  END IF;
END;

FUNCTION errtext 
/*********************************************************** 
This function will determine correct message to be returned
depending on the error number input data. 

created : 12/02/11 blr CCN project
revisions: 

************************************************************/
(err_in IN INTEGER
,err_proc_in IN VARCHAR2
,err_text_in IN VARCHAR2 := NULL) 
  RETURN VARCHAR2 is
v_return_str varchar2(500) := 'no message';
BEGIN

/*separated into application and system errors...
define the messages we want returnend.

This list should mainly be used for application errors

created: 12/08/2011 blr    CCN Project
*/
--example for coding ......  

  
--  if err_text_in is not null then
  	v_return_str := err_proc_in || ' ' ||err_text_in; 
--  end if;	
	
  if err_in = -20000 then
    v_return_str := ' IN PROCEDURE ' || err_proc_in || ' ' || err_text_in ||
     				' This error is not in the scope of defined numeric error';
  end if; 
  
  if err_in = -20999 then
    v_return_str := ' IN PROCEDURE ' || err_proc_in || ' ' || err_text_in ||
    				' Error has occured which is undefined in error handling package';
  end if;   
  
  return(v_return_str);
 END errtext;

END errpkg;

/@


1.1
log
@*** empty log message ***
@
text
@d43 1
d45 1
d91 7
a97 1
--example for coding ......
a100 10
  end if; 
  
  if err_in = -20001 then
    v_return_str := ' IN PROCEDURE ' || err_proc_in || ' ' || err_text_in ||
    				' This person is too young to hire';
  end if;   

 if err_in = -20002 then
    v_return_str := ' IN PROCEDURE ' || err_proc_in || ' ' || err_text_in ||
    				' Salary is below the base salary set for the hired position';
@

