head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2012.09.14.15.09.17;	author TAL946;	state dead;
branches;
next	1.2;
deltatype	text;
kopt	kv;
permissions	444;
commitid	14185053489c084a;
filename	POLLING_DWLD_RSN_HIST_TAPI.pkg;

1.2
date	2012.08.24.15.32.22;	author TAL946;	state Exp;
branches;
next	1.1;
deltatype	text;
kopt	kv;
permissions	666;
commitid	88850379e85312a;
filename	POLLING_DWLD_RSN_HIST_TAPI.pkg;

1.1
date	2012.08.24.15.21.16;	author TAL946;	state Exp;
branches;
next	;
deltatype	text;
kopt	kv;
permissions	666;
commitid	bc450379beb28ab;
filename	POLLING_DWLD_RSN_HIST_TAPI.pkg;


desc
@@


1.3
log
@
Committed on the Free edition of March Hare Software CVSNT Server.
Upgrade to CVS Suite for more features and support:
http://march-hare.com/cvsnt/
@
text
@create or replace
PACKAGE body POLLING_DWLD_RSN_HIST_TAPI
/*********************************************************** 
This is the Package Body
created : 07/15/2012 tal CCN project
updated : 08/24/2012 tal CCN project
************************************************************/
IS

-- insert
PROCEDURE ins(
    in_EFFECTIVE_DATE      IN POLLING_DWLD_RSN_HIST.EFFECTIVE_DATE%type ,
    in_POLLING_STATUS_CODE IN POLLING_DWLD_RSN_HIST.POLLING_STATUS_CODE%type ,
    in_COST_CENTER_CODE    IN POLLING_DWLD_RSN_HIST.COST_CENTER_CODE%type ,
    in_DOWNLOAD_DATE       IN POLLING_DWLD_RSN_HIST.DOWNLOAD_DATE%type DEFAULT NULL ,
    in_POS_DOWNLOAD_REASON IN POLLING_DWLD_RSN_HIST.POS_DOWNLOAD_REASON%type DEFAULT NULL )
IS

--declare
/**************************************************
	variables used in error handling
**************************************************/
	v_code number;

BEGIN
  INSERT
  INTO POLLING_DWLD_RSN_HIST
    (
      EFFECTIVE_DATE ,
      POLLING_STATUS_CODE ,
      COST_CENTER_CODE ,
      DOWNLOAD_DATE ,
      POS_DOWNLOAD_REASON
    )
    VALUES
    (
      in_EFFECTIVE_DATE ,
      in_POLLING_STATUS_CODE ,
      in_COST_CENTER_CODE ,
      in_DOWNLOAD_DATE ,
      in_POS_DOWNLOAD_REASON
    );

EXCEPTION

/************************************************************
	on any error 
	   send the sql error code and the procedure name
	   to the error processor
************************************************************/

	WHEN others then 
	     v_code := SQLCODE;
	     errpkg.raise_err(v_code,'POLLING_DWLD_RSN Insert');

END;

-- update
PROCEDURE upd
  (
    in_EFFECTIVE_DATE      IN POLLING_DWLD_RSN_HIST.EFFECTIVE_DATE%type ,
    in_POLLING_STATUS_CODE IN POLLING_DWLD_RSN_HIST.POLLING_STATUS_CODE%type ,
    in_COST_CENTER_CODE    IN POLLING_DWLD_RSN_HIST.COST_CENTER_CODE%type ,
    in_DOWNLOAD_DATE       IN POLLING_DWLD_RSN_HIST.DOWNLOAD_DATE%type DEFAULT NULL ,
    in_POS_DOWNLOAD_REASON IN POLLING_DWLD_RSN_HIST.POS_DOWNLOAD_REASON%type DEFAULT NULL
  )
IS

--declare
/**************************************************
	variables used in error handling
**************************************************/
	v_code number;

BEGIN
  UPDATE POLLING_DWLD_RSN_HIST
  SET DOWNLOAD_DATE       = in_DOWNLOAD_DATE ,
    POS_DOWNLOAD_REASON   = in_POS_DOWNLOAD_REASON
  WHERE COST_CENTER_CODE  = in_COST_CENTER_CODE
  AND POLLING_STATUS_CODE = in_POLLING_STATUS_CODE
  AND EFFECTIVE_DATE      = in_EFFECTIVE_DATE;

EXCEPTION

/************************************************************
	on any error 
	   send the sql error code and the procedure name
	   to the error processor
************************************************************/

	WHEN others then 
	     v_code := sqlcode;
	     errpkg.raise_err(v_code,'POLLING_DWLD_RSN Update');

END;

-- del
PROCEDURE del(
    in_COST_CENTER_CODE    IN POLLING_DWLD_RSN_HIST.COST_CENTER_CODE%type ,
    in_POLLING_STATUS_CODE IN POLLING_DWLD_RSN_HIST.POLLING_STATUS_CODE%type ,
    in_EFFECTIVE_DATE      IN POLLING_DWLD_RSN_HIST.EFFECTIVE_DATE%type )
IS

--declare
/**************************************************
	variables used in error handling
**************************************************/
	v_code number;

BEGIN
  DELETE
  FROM POLLING_DWLD_RSN_HIST
  WHERE COST_CENTER_CODE  = in_COST_CENTER_CODE
  AND POLLING_STATUS_CODE = in_POLLING_STATUS_CODE
  AND EFFECTIVE_DATE      = in_EFFECTIVE_DATE;

EXCEPTION

/************************************************************
	on any error 
	   send the sql error code and the procedure name
	   to the error processor
************************************************************/

	WHEN others then 
	     v_code := SQLCODE;
	     errpkg.raise_err(v_code,'POLLING_DWLD_RSN Delete');

END;

END POLLING_DWLD_RSN_HIST_tapi;@


1.2
log
@
Committed on the Free edition of March Hare Software CVSNT Server.
Upgrade to CVS Suite for more features and support:
http://march-hare.com/cvsnt/
@
text
@@


1.1
log
@
Committed on the Free edition of March Hare Software CVSNT Server.
Upgrade to CVS Suite for more features and support:
http://march-hare.com/cvsnt/
@
text
@d127 1
a127 1
	     errpkg.raise_err(v_code,'STORE Delete');
@

