PACKAGE BODY PICK_LIST_PKG 
/**********************************************************
	PICK_LIST_PKG BODY

	This Package is intended to insert, update and delete the code detail for picklists and 
	picklist screen

created : 
**********************************************************/
As
 
PROCEDURE CODE_DETAIL_INSERT(
/**********************************************************
	CODE_DETAIL_INSERT

	This procedure will insert into the CODE_DETAIL table 

<CODE_DETAIL>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_DETAIL_VALUE>VALUE</CODE_DETAIL_VALUE> 
      <CODE_DETAIL_DESCRIPTION>DESCRIPTION</CODE_DETAIL_DESCRIPTION>
      <CODE_DETAIL_EXPIRE_FLAG>FLAG</CODE_DETAIL_EXPIRE_FLAG>
      <CODE_DETAIL_EXPIRE_USER>EXPIRE_USER</CODE_DETAIL_EXPIRE_USER>
	    <CODE_DETAIL_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_DETAIL_EXPIRE_EFF_DATE>
	    <CODE_DETAIL_ID>DETAIL ID</CODE_DETAIL_ID>	   
  </row_data>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_DETAIL_VALUE>VALUE</CODE_DETAIL_VALUE> 
      <CODE_DETAIL_DESCRIPTION>DESCRIPTION</CODE_DETAIL_DESCRIPTION>
      <CODE_DETAIL_EXPIRE_FLAG>FLAG</CODE_DETAIL_EXPIRE_FLAG>
      <CODE_DETAIL_EXPIRE_USER>EXPIRE_USER</CODE_DETAIL_EXPIRE_USER>
	    <CODE_DETAIL_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_DETAIL_EXPIRE_EFF_DATE>
	    <CODE_DETAIL_ID>DETAIL ID</CODE_DETAIL_ID>	   
  </row_data>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_DETAIL_VALUE>VALUE</CODE_DETAIL_VALUE> 
      <CODE_DETAIL_DESCRIPTION>DESCRIPTION</CODE_DETAIL_DESCRIPTION>
      <CODE_DETAIL_EXPIRE_FLAG>FLAG</CODE_DETAIL_EXPIRE_FLAG>
      <CODE_DETAIL_EXPIRE_USER>EXPIRE_USER</CODE_DETAIL_EXPIRE_USER>
	    <CODE_DETAIL_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_DETAIL_EXPIRE_EFF_DATE>
	    <CODE_DETAIL_ID>DETAIL ID</CODE_DETAIL_ID>	   
  </row_data>
</CODE_DETAIL>
**********************************************************/
    in_XML                VARCHAR2)
IS

    SQ INTEGER;
    SE VARCHAR2(100);
    invalid_detail_code EXCEPTION;
    
    V_XML XMLTYPE := SYS.XMLTYPE(IN_XML);
    V_CODE               NUMBER;
    V_COUNT				       NUMBER;
    
    V_CONTEXT                      varchar2(100);
    V_CODE_HEADER_NAME             CODE_DETAIL.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE             CODE_DETAIL.CODE_HEADER_TYPE%type;
    V_CODE_DETAIL_VALUE            CODE_DETAIL.CODE_DETAIL_VALUE%TYPE;
	  V_CODE_DETAIL_DESCRIPTION      CODE_DETAIL.CODE_DETAIL_DESCRIPTION%TYPE;
	  V_CODE_DETAIL_EXPIRE_FLAG      CODE_DETAIL.CODE_DETAIL_EXPIRE_FLAG%type;
    V_CODE_DETAIL_EXPIRE_USER      CODE_DETAIL.CODE_DETAIL_EXPIRE_USER%type;
    V_CODE_DETAIL_EXPIRE_EFF_DATE  CODE_DETAIL.CODE_DETAIL_EXPIRE_EFF_DATE%TYPE;
	  V_CODE_DETAIL_ID               CODE_DETAIL.CODE_DETAIL_ID%type;
	   
  
 BEGIN
       While V_XML.EXISTSNODE('/CODE_DETAIL/row_data' ||  '[' || V_COUNT || ']') = 1 LOOP
                                     
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                        
             V_CONTEXT := 'Extracting CODE_DETAIL_VALUE';
             V_CODE_DETAIL_VALUE := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_VALUE/text()').GETSTRINGVAL();

		         V_CONTEXT := 'Extracting CODE_DETAIL_DESCRIPTION';
             V_CODE_DETAIL_DESCRIPTION := v_XML.extract('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_FLAG';
             V_CODE_DETAIL_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_USER';
             V_CODE_DETAIL_EXPIRE_USER := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_USER/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_EFF_DATE';
             V_CODE_DETAIL_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_ID';
             V_CODE_DETAIL_ID := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_ID/text()').GETSTRINGVAL();
				 
             V_CONTEXT := 'Inserting into code_detail';
             INSERT INTO code_detail ( CODE_HEADER_NAME,
                                       CODE_HEADER_TYPE,
                                       CODE_DETAIL_VALUE,
                                       CODE_DETAIL_DESCRIPTION,
                                       CODE_DETAIL_EXPIRE_FLAG,
                                       CODE_DETAIL_EXPIRE_USER,
                                       CODE_DETAIL_EXPIRE_EFF_DATE,
                                       CODE_DETAIL_ID				 
                                                )
                                          VALUES(V_CODE_HEADER_NAME,
                                                 V_CODE_HEADER_TYPE,
                                                 V_CODE_DETAIL_VALUE,
                                                 V_CODE_DETAIL_DESCRIPTION,
                                                 V_CODE_DETAIL_EXPIRE_FLAG,
                                                 V_CODE_DETAIL_EXPIRE_USER,
									                               V_CODE_DETAIL_EXPIRE_EFF_DATE,
									                               V_CODE_DETAIL_ID);
		  V_COUNT := V_COUNT +1;
		  END LOOP;
  
 EXCEPTION 
      WHEN invalid_detail_code THEN
           V_CODE := ERRNUMS.EN_INVALID_CODE_DETAIL_ERR;
           errpkg.raise_err(v_code, 'The code detail value for' || V_CODE_HEADER_NAME || ' is incorrect');
             
      WHEN OTHERS THEN
          SQ := SQLCODE;
          SE := SQLERRM;
          
          V_CONTEXT := V_CONTEXT || ' ' || SQ || ' ' || SE; 
          ERRPKG.RAISE_ERR(-20004,'CODE_DETAIL_INSERT',V_CONTEXT); 
          
END CODE_DETAIL_INSERT;


PROCEDURE CODE_DETAIL_UPDATE(
/**********************************************************
	CODE_DETAIL_UPDATE

	This procedure will UPDATE into the table CODE_DETAIL

<CODE_DETAIL>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_DETAIL_VALUE>VALUE</CODE_DETAIL_VALUE> 
      <CODE_DETAIL_DESCRIPTION>DESCRIPTION</CODE_DETAIL_DESCRIPTION>
      <CODE_DETAIL_EXPIRE_FLAG>FLAG</CODE_DETAIL_EXPIRE_FLAG>
      <CODE_DETAIL_EXPIRE_USER>EXPIRE_USER</CODE_DETAIL_EXPIRE_USER>
	    <CODE_DETAIL_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_DETAIL_EXPIRE_EFF_DATE>
	    <CODE_DETAIL_ID>DETAIL ID</CODE_DETAIL_ID>	   
  </row_data>
</CODE_DETAIL>
**********************************************************/
    in_XML                VARCHAR2)
IS
    SQ INTEGER;
    SE VARCHAR2(100);
    INVALID_DETAIL_CODE EXCEPTION;
    
    V_XML XMLTYPE := SYS.XMLTYPE(IN_XML);
    V_CODE                         NUMBER;
     V_COUNT				               NUMBER;
    
    V_CONTEXT                      varchar2(100);
    V_CODE_HEADER_NAME             CODE_DETAIL.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE             CODE_DETAIL.CODE_HEADER_TYPE%type;
    V_CODE_DETAIL_VALUE            CODE_DETAIL.CODE_DETAIL_VALUE%TYPE;
	  V_CODE_DETAIL_DESCRIPTION      CODE_DETAIL.CODE_DETAIL_DESCRIPTION%TYPE;
	  V_CODE_DETAIL_EXPIRE_FLAG      CODE_DETAIL.CODE_DETAIL_EXPIRE_FLAG%type;
    V_CODE_DETAIL_EXPIRE_USER      CODE_DETAIL.CODE_DETAIL_EXPIRE_USER%type;
    V_CODE_DETAIL_EXPIRE_EFF_DATE  CODE_DETAIL.CODE_DETAIL_EXPIRE_EFF_DATE%TYPE;
  	V_CODE_DETAIL_ID               CODE_DETAIL.CODE_DETAIL_ID%type;
	   
  
   BEGIN
       While V_XML.EXISTSNODE('/CODE_DETAIL/row_data' ||  '[' || V_COUNT || ']') = 1 LOOP
                                     
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                        
             V_CONTEXT := 'Extracting CODE_DETAIL_VALUE';
             V_CODE_DETAIL_VALUE := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_VALUE/text()').GETSTRINGVAL();

		         V_CONTEXT := 'Extracting CODE_DETAIL_DESCRIPTION';
             V_CODE_DETAIL_DESCRIPTION := v_XML.extract('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_FLAG';
             V_CODE_DETAIL_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_USER';
             V_CODE_DETAIL_EXPIRE_USER := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_USER/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_EFF_DATE';
             V_CODE_DETAIL_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_ID';
             V_CODE_DETAIL_ID := v_XML.EXTRACT('/CODE_DETAIL/row_data' || '[' || V_COUNT || ']' || '/CODE_DETAIL_ID/text()').GETSTRINGVAL();

                                
             V_CONTEXT := 'Updating in code_detail';
             UPDATE CODE_DETAIL 
					SET CODE_DETAIL_DESCRIPTION			      = V_CODE_DETAIL_DESCRIPTION,
						  CODE_DETAIL_EXPIRE_FLAG			      = V_CODE_DETAIL_EXPIRE_FLAG,
						  CODE_DETAIL_EXPIRE_USER			      = V_CODE_DETAIL_EXPIRE_USER,
						  CODE_DETAIL_EXPIRE_EFF_DATE		    = V_CODE_DETAIL_EXPIRE_EFF_DATE,
						  CODE_DETAIL_ID				            = V_CODE_DETAIL_ID
				  WHERE CODE_HEADER_NAME   			        = V_CODE_HEADER_NAME
				    AND CODE_HEADER_TYPE    			      = V_CODE_HEADER_TYPE
            AND CODE_DETAIL_VALUE   			      = V_CODE_DETAIL_VALUE;
            
		 	  V_COUNT := V_COUNT +1;
		  END LOOP;
   EXCEPTION 
      WHEN invalid_detail_code THEN
           V_CODE := ERRNUMS.EN_INVALID_CODE_DETAIL_ERR;
           errpkg.raise_err(v_code, 'The code detail value for' || V_CODE_HEADER_NAME || ' is incorrect');
             
      WHEN OTHERS THEN
          SQ := SQLCODE;
          SE := SQLERRM;
          
          V_CONTEXT := V_CONTEXT || ' ' || SQ || ' ' || SE; 
          ERRPKG.RAISE_ERR(-20004,'CODE_DETAIL_UPDATE',V_CONTEXT); 
           
END CODE_DETAIL_UPDATE;

PROCEDURE CODE_DETAIL_DELETE(
/**********************************************************
	CODE_DETAIL_DELETE

	This procedure will DELETE FROM the table CODE_DETAIL

<CODE_DETAIL>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_DETAIL_VALUE>VALUE</CODE_DETAIL_VALUE> 
      <CODE_DETAIL_DESCRIPTION>DESCRIPTION</CODE_DETAIL_DESCRIPTION>
      <CODE_DETAIL_EXPIRE_FLAG>FLAG</CODE_DETAIL_EXPIRE_FLAG>
      <CODE_DETAIL_EXPIRE_USER>EXPIRE_USER</CODE_DETAIL_EXPIRE_USER>
	    <CODE_DETAIL_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_DETAIL_EXPIRE_EFF_DATE>
	    <CODE_DETAIL_ID>DETAIL ID</CODE_DETAIL_ID>	   
  </row_data>
</CODE_DETAIL>
**********************************************************/
    in_XML                VARCHAR2)
IS
  
    V_XML XMLTYPE := SYS.XMLTYPE(IN_XML);
    v_code                         NUMBER;
    
    V_CONTEXT                      varchar2(100);
    V_CODE_HEADER_NAME             CODE_DETAIL.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE             CODE_DETAIL.CODE_HEADER_TYPE%type;
    V_CODE_DETAIL_VALUE            CODE_DETAIL.CODE_DETAIL_VALUE%TYPE;
  	V_CODE_DETAIL_DESCRIPTION      CODE_DETAIL.CODE_DETAIL_DESCRIPTION%TYPE;
  	V_CODE_DETAIL_EXPIRE_FLAG      CODE_DETAIL.CODE_DETAIL_EXPIRE_FLAG%type;
    V_CODE_DETAIL_EXPIRE_USER      CODE_DETAIL.CODE_DETAIL_EXPIRE_USER%type;
    V_CODE_DETAIL_EXPIRE_EFF_DATE  CODE_DETAIL.CODE_DETAIL_EXPIRE_EFF_DATE%TYPE;
  	V_CODE_DETAIL_ID               CODE_DETAIL.CODE_DETAIL_ID%type;
	   
  
   BEGIN
        IF (v_XML.EXISTSNODE('/CODE_DETAIL/row_data') = 1) THEN
               
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_DETAIL/row_data/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := v_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                        
             V_CONTEXT := 'Extracting CODE_DETAIL_VALUE';
             V_CODE_DETAIL_VALUE := v_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_DETAIL_VALUE/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_DETAIL_DESCRIPTION';
             V_CODE_DETAIL_DESCRIPTION := v_XML.extract('/CODE_DETAIL/row_data/CODE_DETAIL_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_FLAG';
             V_CODE_DETAIL_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_DETAIL_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_USER';
             V_CODE_DETAIL_EXPIRE_USER := V_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_DETAIL_EXPIRE_USER/text()').GETSTRINGVAL();
 
			       V_CONTEXT := 'Extracting CODE_DETAIL_EXPIRE_EFF_DATE';
             V_CODE_DETAIL_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_DETAIL_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_DETAIL_ID';
             V_CODE_DETAIL_ID := v_XML.EXTRACT('/CODE_DETAIL/row_data/CODE_DETAIL_ID/text()').GETSTRINGVAL();

                                
             V_CONTEXT := 'DELETING FROM code_detail';
            DELETE FROM CODE_DETAIL 
               WHERE CODE_HEADER_NAME   			        = V_CODE_HEADER_NAME
                  AND   CODE_HEADER_TYPE    		    	= V_CODE_HEADER_TYPE
                  AND   CODE_DETAIL_VALUE   		    	= V_CODE_DETAIL_VALUE
                  AND   CODE_DETAIL_DESCRIPTION	  		= V_CODE_DETAIL_DESCRIPTION
                  AND   CODE_DETAIL_EXPIRE_FLAG		  	= V_CODE_DETAIL_EXPIRE_FLAG
                  AND   CODE_DETAIL_EXPIRE_USER		  	= V_CODE_DETAIL_EXPIRE_USER
                  AND   CODE_DETAIL_EXPIRE_EFF_DATE	  = V_CODE_DETAIL_EXPIRE_EFF_DATE
                  AND   CODE_DETAIL_ID				        = V_CODE_DETAIL_ID;
		  END IF;  
          
END CODE_DETAIL_DELETE;

PROCEDURE CODE_HEADER_INSERT(
/**********************************************************
	CODE_HEADER_INSERT

	This procedure will insert into the table CODE_HEADER

<CODE_HEADER>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_HEADER_DESCRIPTION>DESCRIPTION</CODE_HEADER_DESCRIPTION>
      <CODE_HEADER_EXPIRE_FLAG>FLAG</CODE_HEADER_EXPIRE_FLAG>
      <CODE_HEADER_EXPIRE_USER>EXPIRE_USER</CODE_HEADER_EXPIRE_USER>
	    <CODE_HEADER_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_HEADER_EXPIRE_EFF_DATE>
	    <CODE_HEADER_DTL_VAL_SIZE>DETAIL VALUE_SIZE</CODE_HEADER_DTL_VAL_SIZE>
      <CODE_HEADER_DTL_VAL_DEFAULT>DETAIL VAL_DEFAULT</CODE_HEADER_DTL_VAL_DEFAULT>		  
  </row_data>
</CODE_HEADER>
**********************************************************/
    in_XML                          VARCHAR2)
IS
    
    V_XML xmltype := SYS.xmltype(IN_XML);
     
    V_CONTEXT                       varchar2(100);
    V_CODE_HEADER_NAME              CODE_HEADER.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE              CODE_HEADER.CODE_HEADER_TYPE%type;
    V_CODE_HEADER_DESCRIPTION       CODE_HEADER.CODE_HEADER_DESCRIPTION%TYPE;
	  V_CODE_HEADER_EXPIRE_FLAG       CODE_HEADER.CODE_HEADER_EXPIRE_FLAG%type;
    V_CODE_HEADER_EXPIRE_USER       CODE_HEADER.CODE_HEADER_EXPIRE_USER%type;
    V_CODE_HEADER_EXPIRE_EFF_DATE   CODE_HEADER.CODE_HEADER_EXPIRE_EFF_DATE%TYPE;
	  V_CODE_HEADER_DTL_VAL_SIZE	    CODE_HEADER.CODE_HEADER_DTL_VAL_SIZE%TYPE;
    V_CODE_HEADER_DTL_VAL_DEFAULT	  CODE_HEADER.CODE_HEADER_DTL_VAL_DEFAULT%type;
	   
  
  BEGIN
        IF (v_XML.EXISTSNODE('/CODE_HEADER/row_data') = 1) THEN
               
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                        
       		   V_CONTEXT := 'Extracting CODE_HEADER_DESCRIPTION';
             V_CODE_HEADER_DESCRIPTION := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_FLAG';
             V_CODE_HEADER_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_USER';
             V_CODE_HEADER_EXPIRE_USER := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_USER/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_EFF_DATE';
             V_CODE_HEADER_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_SIZE := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_SIZE/text()').GETSTRINGVAL();
			 
			       V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_DEFAULT := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_DEFAULT/text()').GETSTRINGVAL();

                                
             V_CONTEXT := 'Inserting into CODE_HEADER';
             INSERT INTO CODE_HEADER ( CODE_HEADER_NAME,
                                       CODE_HEADER_TYPE,
                                       CODE_HEADER_DESCRIPTION,
                                       CODE_HEADER_EXPIRE_FLAG,
                                       CODE_HEADER_EXPIRE_USER,
									                     CODE_HEADER_EXPIRE_EFF_DATE,
									                     CODE_HEADER_DTL_VAL_SIZE,
									                     CODE_HEADER_DTL_VAL_DEFAULT
                                                )
                                          VALUES(V_CODE_HEADER_NAME,
                                                 V_CODE_HEADER_TYPE,
                                                 V_CODE_HEADER_DESCRIPTION,
                                                 V_CODE_HEADER_EXPIRE_FLAG,
									                               V_CODE_HEADER_EXPIRE_USER,
									                               V_CODE_HEADER_EXPIRE_EFF_DATE,
									                               V_CODE_HEADER_DTL_VAL_SIZE,
												                         V_CODE_HEADER_DTL_VAL_DEFAULT);
		  END IF;
          
          
END CODE_HEADER_INSERT;


PROCEDURE CODE_HEADER_UPDATE(
/**********************************************************
	CODE_HEADER_UPDATE
	
	This procedure will UPDATE into the table CODE_HEADER

<CODE_HEADER>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_HEADER_DESCRIPTION>DESCRIPTION</CODE_HEADER_DESCRIPTION>
      <CODE_HEADER_EXPIRE_FLAG>FLAG</CODE_HEADER_EXPIRE_FLAG>
      <CODE_HEADER_EXPIRE_USER>EXPIRE_USER</CODE_HEADER_EXPIRE_USER>
	    <CODE_HEADER_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_HEADER_EXPIRE_EFF_DATE>
	    <CODE_HEADER_DTL_VAL_SIZE>HEADER VALUE_SIZE</CODE_HEADER_DTL_VAL_SIZE>
      <CODE_HEADER_DTL_VAL_DEFAULT>HEADER VAL_DEFAULT</CODE_HEADER_DTL_VAL_DEFAULT>		  
  </row_data>
</CODE_HEADER>
**********************************************************/
    in_XML                VARCHAR2)
IS
   
    V_XML xmltype := SYS.xmltype(IN_XML);
      
    V_CONTEXT                       varchar2(100);
    V_CODE_HEADER_NAME              CODE_HEADER.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE              CODE_HEADER.CODE_HEADER_TYPE%type;
    V_CODE_HEADER_DESCRIPTION       CODE_HEADER.CODE_HEADER_DESCRIPTION%TYPE;
	  V_CODE_HEADER_EXPIRE_FLAG       CODE_HEADER.CODE_HEADER_EXPIRE_FLAG%type;
    V_CODE_HEADER_EXPIRE_USER       CODE_HEADER.CODE_HEADER_EXPIRE_USER%type;
    V_CODE_HEADER_EXPIRE_EFF_DATE   CODE_HEADER.CODE_HEADER_EXPIRE_EFF_DATE%TYPE;
	  V_CODE_HEADER_DTL_VAL_SIZE	    CODE_HEADER.CODE_HEADER_DTL_VAL_SIZE%TYPE;
    V_CODE_HEADER_DTL_VAL_DEFAULT	  CODE_HEADER.CODE_HEADER_DTL_VAL_DEFAULT%type;
  
   BEGIN
        IF (v_XML.EXISTSNODE('/CODE_HEADER/row_data') = 1) THEN
               
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                        
       		   V_CONTEXT := 'Extracting CODE_HEADER_DESCRIPTION';
             V_CODE_HEADER_DESCRIPTION := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_FLAG';
             V_CODE_HEADER_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_USER';
             V_CODE_HEADER_EXPIRE_USER := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_USER/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_EFF_DATE';
             V_CODE_HEADER_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_SIZE := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_SIZE/text()').GETSTRINGVAL();
			 
		      	 V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_DEFAULT := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_DEFAULT/text()').GETSTRINGVAL();
                                
             V_CONTEXT := 'Updating in CODE_HEADER';
            
			    UPDATE CODE_HEADER 
					 SET CODE_HEADER_EXPIRE_FLAG			= V_CODE_HEADER_EXPIRE_FLAG,
						   CODE_HEADER_EXPIRE_USER			= V_CODE_HEADER_EXPIRE_USER,
						   CODE_HEADER_EXPIRE_EFF_DATE	= V_CODE_HEADER_EXPIRE_EFF_DATE,
					     CODE_HEADER_DTL_VAL_SIZE		  = V_CODE_HEADER_DTL_VAL_SIZE,
						   CODE_HEADER_DTL_VAL_DEFAULT	= V_CODE_HEADER_DTL_VAL_DEFAULT
				  WHERE CODE_HEADER_NAME   			    = V_CODE_HEADER_NAME
				    AND CODE_HEADER_TYPE    			  = V_CODE_HEADER_TYPE
					  AND CODE_HEADER_DESCRIPTION	  	= V_CODE_HEADER_DESCRIPTION;
		  END IF;
           
END CODE_HEADER_UPDATE;

PROCEDURE CODE_HEADER_DELETE(
/**********************************************************
	CODE_HEADER_DELETE

	This procedure will DELETE FROM the table CODE_HEADER

<CODE_HEADER>
  <row_data>
      <CODE_HEADER_NAME>NAME</CODE_HEADER_NAME> 
      <CODE_HEADER_TYPE>TYPE</CODE_HEADER_TYPE> 
      <CODE_HEADER_DESCRIPTION>DESCRIPTION</CODE_HEADER_DESCRIPTION>
      <CODE_HEADER_EXPIRE_FLAG>FLAG</CODE_HEADER_EXPIRE_FLAG>
      <CODE_HEADER_EXPIRE_USER>EXPIRE_USER</CODE_HEADER_EXPIRE_USER>
	    <CODE_HEADER_EXPIRE_EFF_DATE>EXPIRE EFF_DATE</CODE_HEADER_EXPIRE_EFF_DATE>
	    <CODE_HEADER_DTL_VAL_SIZE>HEADER VALUE_SIZE</CODE_HEADER_DTL_VAL_SIZE>
      <CODE_HEADER_DTL_VAL_DEFAULT>HEADER VAL_DEFAULT</CODE_HEADER_DTL_VAL_DEFAULT>		  
  </row_data>
</CODE_HEADER>
**********************************************************/
    in_XML                VARCHAR2)
IS
  
    V_XML xmltype := SYS.xmltype(IN_XML);
      
    V_CONTEXT                       varchar2(100);
    V_CODE_HEADER_NAME              CODE_HEADER.CODE_HEADER_NAME%type;
    V_CODE_HEADER_TYPE              CODE_HEADER.CODE_HEADER_TYPE%type;
    V_CODE_HEADER_DESCRIPTION       CODE_HEADER.CODE_HEADER_DESCRIPTION%TYPE;
    V_CODE_HEADER_EXPIRE_FLAG       CODE_HEADER.CODE_HEADER_EXPIRE_FLAG%type;
    V_CODE_HEADER_EXPIRE_USER       CODE_HEADER.CODE_HEADER_EXPIRE_USER%type;
    V_CODE_HEADER_EXPIRE_EFF_DATE   CODE_HEADER.CODE_HEADER_EXPIRE_EFF_DATE%TYPE;
	  V_CODE_HEADER_DTL_VAL_SIZE	    CODE_HEADER.CODE_HEADER_DTL_VAL_SIZE%TYPE;
    V_CODE_HEADER_DTL_VAL_DEFAULT	  CODE_HEADER.CODE_HEADER_DTL_VAL_DEFAULT%type;
  
   BEGIN
        IF (v_XML.EXISTSNODE('/CODE_HEADER/row_data') = 1) THEN
               
             V_CONTEXT := 'Extracting CODE_HEADER_NAME';
             V_CODE_HEADER_NAME := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_NAME/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_TYPE';
             V_CODE_HEADER_TYPE := V_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_TYPE/text()').GETSTRINGVAL();
                         
       		   V_CONTEXT := 'Extracting CODE_HEADER_DESCRIPTION';
             V_CODE_HEADER_DESCRIPTION := v_XML.extract('/CODE_HEADER/row_data/CODE_HEADER_DESCRIPTION/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_FLAG';
             V_CODE_HEADER_EXPIRE_FLAG := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_FLAG/text()').GETSTRINGVAL();
                         
             V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_USER';
             V_CODE_HEADER_EXPIRE_USER := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_USER/text()').GETSTRINGVAL();

			       V_CONTEXT := 'Extracting CODE_HEADER_EXPIRE_EFF_DATE';
             V_CODE_HEADER_EXPIRE_EFF_DATE := TO_DATE(v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_EXPIRE_EFF_DATE/text()').GETSTRINGVAL(),'MM-DD-YYYY');
                         
             V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_SIZE := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_SIZE/text()').GETSTRINGVAL();
			 
			       V_CONTEXT := 'Extracting CODE_HEADER_DTL_VAL_SIZE';
             V_CODE_HEADER_DTL_VAL_DEFAULT := v_XML.EXTRACT('/CODE_HEADER/row_data/CODE_HEADER_DTL_VAL_DEFAULT/text()').GETSTRINGVAL();
                                
             V_CONTEXT := 'DELETING FROM CODE_HEADER';
            DELETE FROM CODE_DETAIL 
				          WHERE CODE_HEADER_NAME   			     = V_CODE_HEADER_NAME
                  AND   CODE_HEADER_TYPE    			   = V_CODE_HEADER_TYPE
                  ;
            DELETE FROM CODE_HEADER 
				          WHERE CODE_HEADER_NAME   			     = V_CODE_HEADER_NAME
                  AND   CODE_HEADER_TYPE    			   = V_CODE_HEADER_TYPE
                  AND   CODE_HEADER_DESCRIPTION		   = V_CODE_HEADER_DESCRIPTION 
                  AND   CODE_HEADER_EXPIRE_FLAG			 = V_CODE_HEADER_EXPIRE_FLAG
                  AND   CODE_HEADER_EXPIRE_USER			 = V_CODE_HEADER_EXPIRE_USER
                  AND   CODE_HEADER_EXPIRE_EFF_DATE	 = V_CODE_HEADER_EXPIRE_EFF_DATE
                  AND   CODE_HEADER_DTL_VAL_SIZE		 = V_CODE_HEADER_DTL_VAL_SIZE
				          AND   CODE_HEADER_DTL_VAL_DEFAULT	 = V_CODE_HEADER_DTL_VAL_DEFAULT
                  ;
                                                 
		  END IF;  
          
END CODE_HEADER_DELETE;

PROCEDURE CODE_HEADER_DETAIL_S_SP(
                  IN_CODE_HEADER_NAME    IN     VARCHAR2,
                  IN_CODE_HEADER_TYPE    IN     VARCHAR2,
                  OUT_XML                OUT    VARCHAR2
) IS
   V_XML SYS.XMLTYPE;
BEGIN
   SELECT XMLElement( "CODE_HEADER_DETAIL_UI",
                     XMLAttributes ('http://www.w3.org/2001/XMLSchema' AS  "xmlns:xsi",
                                    'http://www.oracle.com/Employee.xsd' AS  "xsi:nonamespaceSchemaLocation"),
                     XMLElement( "CODE_HEADER",
                                XMLElement(CODE_HEADER_NAME,ch.CODE_HEADER_NAME),
                                XMLElement(CODE_HEADER_TYPE,ch.CODE_HEADER_TYPE),
                                XMLElement(CODE_HEADER_DESCRIPTION,ch.CODE_HEADER_DESCRIPTION),
                                XMLElement(CODE_HEADER_EXPIRE_FLAG,ch.CODE_HEADER_EXPIRE_FLAG),
                                XMLElement(CODE_HEADER_EXPIRE_USER,ch.CODE_HEADER_EXPIRE_USER),
                                XMLElement(CODE_HEADER_EXPIRE_EFF_DATE,ch.CODE_HEADER_EXPIRE_EFF_DATE),
                                XMLElement(CODE_HEADER_DTL_VAL_SIZE,ch.CODE_HEADER_DTL_VAL_SIZE),
                                XMLElement(CODE_HEADER_DTL_VAL_DEFAULT,ch.CODE_HEADER_DTL_VAL_DEFAULT),
                                XMLElement(CODE_HEADER_FLAG,'S')),
                     (SELECT SYS_XMLAGG(
                                        XMLElement( "CODE_DETAIL",
                                                   XMLElement(CODE_HEADER_NAME,cd.CODE_HEADER_NAME),
                                                   XMLElement(CODE_HEADER_TYPE,cd.CODE_HEADER_TYPE),
                                                   XMLElement(CODE_DETAIL_VALUE,cd.CODE_DETAIL_VALUE),
                                                   XMLElement(CODE_DETAIL_DESCRIPTION,cd.CODE_DETAIL_DESCRIPTION),
                                                   XMLElement(CODE_DETAIL_EXPIRE_FLAG,cd.CODE_DETAIL_EXPIRE_FLAG),
                                                   XMLElement(CODE_DETAIL_EXPIRE_USER,cd.CODE_DETAIL_EXPIRE_USER),
                                                   XMLElement(CODE_DETAIL_EXPIRE_EFF_DATE,cd.CODE_DETAIL_EXPIRE_EFF_DATE),
                                                   XMLElement(CODE_DETAIL_ID,cd.CODE_DETAIL_ID),
                                                   XMLElement(CODE_DETAIL_FLAG,'S')
                                                  ))
                                  FROM CODE_DETAIL CD
                                 WHERE CD.CODE_HEADER_NAME = CH.CODE_HEADER_NAME
                                   AND CD.CODE_HEADER_TYPE = CH.CODE_HEADER_TYPE)
                    ) AS xml INTO V_XML
     FROM CODE_HEADER CH
    WHERE CODE_HEADER_NAME = IN_CODE_HEADER_NAME --'COUNTRY_CODE'
      AND CODE_HEADER_TYPE = IN_CODE_HEADER_TYPE; --'COD'
   
   OUT_XML := REPLACE(V_XML.GETSTRINGVAL(),'ROWSET','CODE_DETAIL_TABLE');
   
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END CODE_HEADER_DETAIL_S_SP;

PROCEDURE CODE_HEADER_DETAIL_IUD_SP(
                  IN_XML                IN     VARCHAR2
) IS
   V_XML         SYS.XMLTYPE := SYS.XMLTYPE(IN_XML);
   
BEGIN
   FOR rec IN (
   SELECT x.*-- INTO CODE_HEADER_RECORD
     FROM XMLTable('for $i in /CODE_HEADER_DETAIL_UI/CODE_HEADER return $i'
                    PASSING V_XML
                    COLUMNS CODE_HEADER_NAME                     VARCHAR2(30),
                            CODE_HEADER_TYPE                     VARCHAR2(3),
                            CODE_HEADER_DESCRIPTION              VARCHAR2(100),
                            CODE_HEADER_EXPIRE_FLAG              CHAR(1),
                            CODE_HEADER_EXPIRE_USER              VARCHAR2(20),
                            CODE_HEADER_EXPIRE_EFF_DATE          DATE,
                            CODE_HEADER_DTL_VAL_SIZE             NUMBER(2),
                            CODE_HEADER_DTL_VAL_DEFAULT          VARCHAR2(32),
                            CODE_HEADER_FLAG                     VARCHAR2(1)) x) LOOP
      
      IF rec.CODE_HEADER_FLAG = 'I' THEN
         INSERT INTO CODE_HEADER VALUES (rec.CODE_HEADER_NAME,
                                         rec.CODE_HEADER_TYPE,
                                         rec.CODE_HEADER_DESCRIPTION,
                                         rec.CODE_HEADER_EXPIRE_FLAG,
                                         rec.CODE_HEADER_EXPIRE_USER,
                                         rec.CODE_HEADER_EXPIRE_EFF_DATE,
                                         rec.CODE_HEADER_DTL_VAL_SIZE,
                                         rec.CODE_HEADER_DTL_VAL_DEFAULT);
      END IF;
      IF rec.CODE_HEADER_FLAG = 'U' THEN
         UPDATE CODE_HEADER SET CODE_HEADER_NAME            = rec.CODE_HEADER_NAME,
                                CODE_HEADER_TYPE            = rec.CODE_HEADER_TYPE,
                                CODE_HEADER_DESCRIPTION     = rec.CODE_HEADER_DESCRIPTION,
                                CODE_HEADER_EXPIRE_FLAG     = rec.CODE_HEADER_EXPIRE_FLAG,
                                CODE_HEADER_EXPIRE_USER     = rec.CODE_HEADER_EXPIRE_USER,
                                CODE_HEADER_EXPIRE_EFF_DATE = rec.CODE_HEADER_EXPIRE_EFF_DATE,
                                CODE_HEADER_DTL_VAL_SIZE    = rec.CODE_HEADER_DTL_VAL_SIZE,
                                CODE_HEADER_DTL_VAL_DEFAULT = rec.CODE_HEADER_DTL_VAL_DEFAULT
          WHERE CODE_HEADER_NAME = rec.CODE_HEADER_NAME
            AND CODE_HEADER_TYPE = rec.CODE_HEADER_TYPE;
      END IF;
      IF rec.CODE_HEADER_FLAG = 'D' THEN
         DELETE
           FROM CODE_DETAIL
          WHERE CODE_HEADER_NAME  = rec.CODE_HEADER_NAME
            AND CODE_HEADER_TYPE  = rec.CODE_HEADER_TYPE;

         DELETE
           FROM CODE_HEADER
          WHERE CODE_HEADER_NAME = rec.CODE_HEADER_NAME
            AND CODE_HEADER_TYPE = rec.CODE_HEADER_TYPE;
      END IF;
   END LOOP;
   FOR rec IN (
   SELECT x.*-- BULK COLLECT INTO CODE_DETAIL_TABLE
     FROM XMLTable('for $i in /CODE_HEADER_DETAIL_UI/CODE_DETAIL_TABLE/CODE_DETAIL return $i'
                    PASSING V_XML
                    COLUMNS CODE_HEADER_NAME                     VARCHAR2(30),
                            CODE_HEADER_TYPE                     VARCHAR2(3),
                            CODE_DETAIL_VALUE                    VARCHAR2(32),
                            CODE_DETAIL_DESCRIPTION              VARCHAR2(100),
                            CODE_DETAIL_EXPIRE_FLAG              CHAR(1),
                            CODE_DETAIL_EXPIRE_USER              VARCHAR2(20),
                            CODE_DETAIL_EXPIRE_EFF_DATE          DATE,
                            CODE_DETAIL_ID                       NUMBER(38,3),
                            CODE_DETAIL_FLAG                     VARCHAR2(1)) x) LOOP
      IF rec.CODE_DETAIL_FLAG = 'I' THEN
         INSERT INTO CODE_DETAIL VALUES (rec.CODE_HEADER_NAME,
                                         rec.CODE_HEADER_TYPE,
                                         rec.CODE_DETAIL_VALUE,
                                         rec.CODE_DETAIL_DESCRIPTION,
                                         rec.CODE_DETAIL_EXPIRE_FLAG,
                                         rec.CODE_DETAIL_EXPIRE_USER,
                                         rec.CODE_DETAIL_EXPIRE_EFF_DATE,
                                         rec.CODE_DETAIL_ID);
      END IF;
      IF rec.CODE_DETAIL_FLAG = 'U' THEN
         UPDATE CODE_DETAIL SET CODE_HEADER_NAME            = rec.CODE_HEADER_NAME,
                                CODE_HEADER_TYPE            = rec.CODE_HEADER_TYPE,
                                CODE_DETAIL_VALUE           = rec.CODE_DETAIL_VALUE,
                                CODE_DETAIL_DESCRIPTION     = rec.CODE_DETAIL_DESCRIPTION,
                                CODE_DETAIL_EXPIRE_FLAG     = rec.CODE_DETAIL_EXPIRE_FLAG,
                                CODE_DETAIL_EXPIRE_USER     = rec.CODE_DETAIL_EXPIRE_USER,
                                CODE_DETAIL_EXPIRE_EFF_DATE = rec.CODE_DETAIL_EXPIRE_EFF_DATE,
                                CODE_DETAIL_ID              = rec.CODE_DETAIL_ID
          WHERE CODE_HEADER_NAME = rec.CODE_HEADER_NAME
            AND CODE_HEADER_TYPE = rec.CODE_HEADER_TYPE
            AND CODE_DETAIL_VALUE = rec.CODE_DETAIL_VALUE;
      END IF;
      IF rec.CODE_DETAIL_FLAG = 'D' THEN
         DELETE
           FROM CODE_DETAIL
          WHERE CODE_HEADER_NAME  = rec.CODE_HEADER_NAME
            AND CODE_HEADER_TYPE  = rec.CODE_HEADER_TYPE
            AND CODE_DETAIL_VALUE = rec.CODE_DETAIL_VALUE;
      END IF;
   END LOOP;
EXCEPTION
   WHEN OTHERS THEN
      NULL;
END CODE_HEADER_DETAIL_IUD_SP;

END PICK_LIST_PKG;
/

