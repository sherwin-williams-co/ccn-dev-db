CREATE OR REPLACE PACKAGE BODY BANKING_UI_INTERFACE_APP_PKG
AS
/**********************************************************
  This Package is intended to be the wrapper for all banking
  related packages that are invoked from UI

created : 03/30/2015 jxc517 CCN Project....
changed :
**********************************************************/
PROCEDURE ACCOUNT_MAINTENACE_UI_SP (
/*******************************************************************************
	This procedure is intended to RETURN a ref cursor with data from banking
  account maintenance related tables

Inputs:
    IN_BANK_ACCOUNT_NBR
    IN_COST_CENTER_CODE

Created : 03/30/2015 jxc517 CCN Project....
Changed : 
*******************************************************************************/
IN_BANK_ACCOUNT_NBR           IN     VARCHAR2
,IN_COST_CENTER_CODE          IN     VARCHAR2
,OUT_BANK_ACCOUNT_REF_CUR        OUT REF_CURSOR
,OUT_BANK_ACCOUNT_FTR_REF_CUR    OUT REF_CURSOR
,OUT_BANK_LEAD_CC_REF_CUR        OUT REF_CURSOR
,OUT_BANK_LEAD_CC_FTR_REF_CUR    OUT REF_CURSOR
,OUT_BANK_MICR_FORMAT_REF_CUR    OUT REF_CURSOR
,OUT_BANK_MICR_FRMT_FTR_REF_CUR  OUT REF_CURSOR)
IS
BEGIN
    ACCOUNT_MAINTENANCE_PKG.ACCOUNT_MAINTENACE_UI_SP(IN_BANK_ACCOUNT_NBR,
                                                     IN_COST_CENTER_CODE,
                                                     OUT_BANK_ACCOUNT_REF_CUR,
                                                     OUT_BANK_ACCOUNT_FTR_REF_CUR,
                                                     OUT_BANK_LEAD_CC_REF_CUR,
                                                     OUT_BANK_LEAD_CC_FTR_REF_CUR,
                                                     OUT_BANK_MICR_FORMAT_REF_CUR,
                                                     OUT_BANK_MICR_FRMT_FTR_REF_CUR);
END ACCOUNT_MAINTENACE_UI_SP;

PROCEDURE BANK_DEP_TICK_UI_SP (
/*******************************************************************************
	This procedure is intended to RETURN a ref cursor with data from BANK_DEP_TICK table

Inputs:
    IN_COST_CENTER_CODE

Created : 05/20/2015 jxc517 CCN Project....
Changed : 
*******************************************************************************/
IN_COST_CENTER_CODE           IN     VARCHAR2
,OUT_BANK_DEP_TICK_REF_CUR       OUT REF_CURSOR
,OUT_BANK_ACCOUNT_REF_CUR        OUT REF_CURSOR
,OUT_BANK_MICR_FORMAT_REF_CUR    OUT REF_CURSOR)
IS
BEGIN
    DEPOSIT_TICKET_MAINTENANCE_PKG.DEPOSIT_TICKET_MNTNC_UI_SP(IN_COST_CENTER_CODE,
                                                              OUT_BANK_DEP_TICK_REF_CUR,
                                                              OUT_BANK_ACCOUNT_REF_CUR,
                                                              OUT_BANK_MICR_FORMAT_REF_CUR);
END BANK_DEP_TICK_UI_SP;

PROCEDURE BANK_DEP_BAG_TICK_UI_SP (
/*******************************************************************************
	This procedure is intended to RETURN a ref cursor with data from BANK_DEP_BAG_TICK table

Inputs:
    IN_COST_CENTER_CODE

Created : 05/20/2015 jxc517 CCN Project....
Changed : 
*******************************************************************************/
IN_COST_CENTER_CODE IN     VARCHAR2
,OUT_REF_CUR           OUT REF_CURSOR)
IS
BEGIN
    DEPOSIT_BAG_MAINTENANCE_PKG.BANK_DEP_BAG_TICK_UI_SP(IN_COST_CENTER_CODE, OUT_REF_CUR);
END BANK_DEP_BAG_TICK_UI_SP;

PROCEDURE MEMBER_CC_MAINTENACE_UI_SP (
/*******************************************************************************
	This procedure is intended to RETURN a ref cursor with data from member
  cost center maintenance related tables

Inputs:
    IN_COST_CENTER_CODE

Created : 05/22/2015 jxc517 CCN Project....
Changed : 06/15/2015 sxh487 Added the condition to check if the CC entered is a LEAD
          or not
*******************************************************************************/
IN_COST_CENTER_CODE          IN     VARCHAR2
,OUT_BANK_MBR_CC_REF_CUR         OUT REF_CURSOR
,OUT_BANK_MBR_CC_FTR_REF_CUR     OUT REF_CURSOR)
IS
BEGIN
    MEMBER_MAINTENANCE_PKG.MEMBER_CC_MAINTENACE_UI_SP(IN_COST_CENTER_CODE,
                                                      OUT_BANK_MBR_CC_REF_CUR,
                                                      OUT_BANK_MBR_CC_FTR_REF_CUR);
END MEMBER_CC_MAINTENACE_UI_SP;

PROCEDURE BANK_HISTORY_UI_SP (
/*******************************************************************************
	This procedure is intended to RETURN a ref cursor with data from the
  history of the cost center (Independent/Lead/Member) passed

Inputs:
    IN_COST_CENTER_CODE

Created : 06/05/2015 jxc517 CCN Project....
Changed : 
*******************************************************************************/
IN_COST_CENTER_CODE IN     VARCHAR2
,OUT_REF_CUR           OUT REF_CURSOR)
IS
BEGIN
    --Testing : '799807' Lead, '708225' Member
    OPEN OUT_REF_CUR FOR
        --History Bank Account Details joined with history tables
        SELECT B.BANK_ACCOUNT_NBR,
               T.BANK_BRANCH_NBR,
               T.EFFECTIVE_DATE,
               T.EXPIRATION_DATE,
               B.EFFECTIVE_DATE BANK_EFFECTIVE_DATE,
               B.EXPIRATION_DATE BANK_EXPIRATION_DATE,
               B.BANK_NAME,
               B.BOOK_KEEPER_NBR,
               B.BANK_AUTO_RECON_IND
          FROM BANK_ACCOUNT_HIST B,
               --history LEAD union history MEMBER
               (SELECT BANK_ACCOUNT_NBR,
                       BANK_BRANCH_NBR,
                       EFFECTIVE_DATE,
                       EXPIRATION_DATE,
                       BANK_TYPE_CODE,
                       NULL FUTURE_ID
                  FROM LEAD_BANK_CC_HIST
                 WHERE COST_CENTER_CODE = IN_COST_CENTER_CODE
                 UNION
                SELECT NVL(M.BANK_ACCOUNT_NUMBER,L.BANK_ACCOUNT_NBR) BANK_ACCOUNT_NBR,
                       NVL(M.BANK_BRANCH_NBR, L.BANK_BRANCH_NBR) BANK_BRANCH_NBR,
                       M.EFFECTIVE_DATE,
                       M.EXPIRATION_DATE,
                       'M' BANK_TYPE_CODE,
                       NULL FUTURE_ID
                  FROM MEMBER_BANK_CC_HIST M,
                       LEAD_BANK_CC_HIST L
                 WHERE L.COST_CENTER_CODE = M.LEAD_STORE_NBR
                   AND M.MEMBER_STORE_NBR = IN_COST_CENTER_CODE) T
         WHERE B.BANK_ACCOUNT_NBR(+) = T.BANK_ACCOUNT_NBR
           AND NVL(B.EFFECTIVE_DATE(+),TRUNC(SYSDATE)) BETWEEN T.EFFECTIVE_DATE AND NVL(T.EXPIRATION_DATE,TRUNC(SYSDATE))
           AND T.FUTURE_ID IS NULL
         UNION
        --Current Bank Account Details joined with current tables
        SELECT B.BANK_ACCOUNT_NBR,
               T.BANK_BRANCH_NBR,
               T.EFFECTIVE_DATE,
               T.EXPIRATION_DATE,
               B.EFFECTIVE_DATE BANK_EFFECTIVE_DATE,
               B.EXPIRATION_DATE BANK_EXPIRATION_DATE,
               B.BANK_NAME,
               B.BOOK_KEEPER_NBR,
               B.BANK_AUTO_RECON_IND
          FROM BANK_ACCOUNT B,
               --current LEAD union current MEMBER
               (SELECT BANK_ACCOUNT_NBR,
                       BANK_BRANCH_NBR,
                       EFFECTIVE_DATE,
                       EXPIRATION_DATE,
                       BANK_TYPE_CODE,
                       NULL FUTURE_ID
                  FROM LEAD_BANK_CC
                 WHERE COST_CENTER_CODE = IN_COST_CENTER_CODE
                  UNION
                 SELECT NVL(M.BANK_ACCOUNT_NUMBER,L.BANK_ACCOUNT_NBR) BANK_ACCOUNT_NBR,
                       NVL(M.BANK_BRANCH_NBR, L.BANK_BRANCH_NBR) BANK_BRANCH_NBR,
                       M.EFFECTIVE_DATE,
                       M.EXPIRATION_DATE,
                       'M' BANK_TYPE_CODE,
                       NULL FUTURE_ID
                  FROM MEMBER_BANK_CC M,
                       LEAD_BANK_CC L
                 WHERE L.COST_CENTER_CODE = M.LEAD_STORE_NBR
                   AND M.MEMBER_STORE_NBR = IN_COST_CENTER_CODE) T
         WHERE B.BANK_ACCOUNT_NBR(+) = T.BANK_ACCOUNT_NBR
           AND NVL(B.EFFECTIVE_DATE(+),TRUNC(SYSDATE)) BETWEEN T.EFFECTIVE_DATE AND NVL(T.EXPIRATION_DATE,TRUNC(SYSDATE))
           AND T.FUTURE_ID IS NULL
         UNION
        --Future Bank Account Details joined with future tables
        SELECT B.BANK_ACCOUNT_NBR,
               T.BANK_BRANCH_NBR,
               T.EFFECTIVE_DATE,
               T.EXPIRATION_DATE,
               B.EFFECTIVE_DATE BANK_EFFECTIVE_DATE,
               B.EXPIRATION_DATE BANK_EXPIRATION_DATE,
               B.BANK_NAME,
               B.BOOK_KEEPER_NBR,
               B.BANK_AUTO_RECON_IND
          FROM BANK_ACCOUNT_FUTURE B,
               --future LEAD union future MEMBER
               (SELECT BANK_ACCOUNT_NBR,
                       BANK_BRANCH_NBR,
                       EFFECTIVE_DATE,
                       EXPIRATION_DATE,
                       BANK_TYPE_CODE,
                       FUTURE_ID
                  FROM LEAD_BANK_CC_FUTURE
                 WHERE COST_CENTER_CODE = IN_COST_CENTER_CODE
                  UNION
                 SELECT NVL(M.BANK_ACCOUNT_NUMBER, L.BANK_ACCOUNT_NBR) BANK_ACCOUNT_NBR,
                       NVL(M.BANK_BRANCH_NBR, L.BANK_BRANCH_NBR) BANK_BRANCH_NBR,
                       M.EFFECTIVE_DATE,
                       M.EXPIRATION_DATE,
                       'M' BANK_TYPE_CODE,
                       M.FUTURE_ID
                  FROM MEMBER_BANK_CC_FUTURE M,
                       LEAD_BANK_CC_FUTURE L
                 WHERE L.COST_CENTER_CODE = M.LEAD_STORE_NBR
                   AND M.MEMBER_STORE_NBR = IN_COST_CENTER_CODE) T
         WHERE B.BANK_ACCOUNT_NBR(+) = T.BANK_ACCOUNT_NBR
           AND B.FUTURE_ID           = T.FUTURE_ID
         ORDER BY EFFECTIVE_DATE;
END BANK_HISTORY_UI_SP;

PROCEDURE ACCNT_MNTNC_UI_UPSERT_SP ( 
/******************************************************************************
This procedure is intended to update following tables used in the Account Maintenance Window
    Tables: 
       BANK_ACCOUNT
       BANK_ACCOUNT_FUTURE
       LEAD_BANK_CC
       LEAD_BANK_CC_FUTURE
       BANK_MICR_FORMAT
       BANK_MICR_FORMAT_FUTURE

<?xml version="1.0" encoding="UTF-8" ?>
<ACCOUNT_MAINTENANCE_UI xmlns:xsi="http://www.w3.org/2001/XMLSchema" xsi:nonamespaceSchemaLocation="http://www.oracle.com/Employee.xsd">
    <BANK_ACCOUNT>
        <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
        <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
        <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
        <BANK_NAME>XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</BANK_NAME>
        <BOOK_KEEPER_NBR>XX</BOOK_KEEPER_NBR>
        <STATEMENT_TYPE>XX</STATEMENT_TYPE>
        <BANK_AUTO_RECON_IND>X</BANK_AUTO_RECON_IND>
        <RECON_START_DATE>MM-DD-RRRR</RECON_START_DATE>
        <RECON_BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</RECON_BANK_ACCOUNT_NBR>
        <JV_BOOK_KEEPER_REF>XXXXXX</JV_BOOK_KEEPER_REF>
        <JV_BANK_SHORT_NAME>XXXXXX</JV_BANK_SHORT_NAME>
        <IDI_BOOKKEEPER_REF>XXXXXX</IDI_BOOKKEEPER_REF>
        <IDI_BANK_SHORT_NAME>XXXXXX</IDI_BANK_SHORT_NAME>
        <ROUTING_NBR>XXXXXXXXX</ROUTING_NBR>
        <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
    </BANK_ACCOUNT>
    <LEAD_BANK_CC>
        <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
        <COST_CENTER_CODE>XXXXXX</COST_CENTER_CODE>
        <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
        <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
        <BANK_BRANCH_NBR>XXXXXXXX</BANK_BRANCH_NBR>
        <BANK_TYPE_CODE>X</BANK_TYPE_CODE>
        <UPDATE_DATE>MM-DD-RRRR</UPDATE_DATE>
        <LAST_UPD_USER_ID>XXXXXXXX</LAST_UPD_USER_ID>
    </LEAD_BANK_CC>
    <BANK_MICR_FORMAT_TABLE>
        <BANK_MICR_FORMAT>
            <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
            <FORMAT_NAME>XXXXXX</FORMAT_NAME>
            <DJDE_FORM_PARM>XXXXXX</DJDE_FORM_PARM>
            <DJDE_FEED_PARM>XXXXX</DJDE_FEED_PARM>
            <MICR_COST_CNTR>XXXXXXXX</MICR_COST_CNTR>
            <MICR_ROUTING_NBR>XXXXXXXXXXX</MICR_ROUTING_NBR>
            <MICR_FORMAT_ACTNBR>XXXXXXXXXXXXXXXXX</MICR_FORMAT_ACTNBR>
            <REORDER_POINT>XXXXX</REORDER_POINT>
            <REORDER_NUMBER_BKS>XXXXX</REORDER_NUMBER_BKS>
            <IMAGES_PER_PAGE>X</IMAGES_PER_PAGE>
            <NBR_FORMS_PER_BK>XXXXX</NBR_FORMS_PER_BK>
            <PART_PAPER_PER_FORM>X</PART_PAPER_PER_FORM>
            <NBR_DEP_TICKETS_PER_BK>XXXXX</NBR_DEP_TICKETS_PER_BK>
            <SHEETS_OF_PAPER_PER_BK>XXXXX</SHEETS_OF_PAPER_PER_BK>
            <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
            <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
            <LAST_MAINTENANCE_DATE>MM-DD-RRRR</LAST_MAINTENANCE_DATE>
            <LAST_MAINT_USER_ID>XXXXXX</LAST_MAINT_USER_ID>
            <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
        </BANK_MICR_FORMAT>
        <BANK_MICR_FORMAT>
            <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
            <FORMAT_NAME>XXXXXX</FORMAT_NAME>
            <DJDE_FORM_PARM>XXXXXX</DJDE_FORM_PARM>
            <DJDE_FEED_PARM>XXXXX</DJDE_FEED_PARM>
            <MICR_COST_CNTR>XXXXXXXX</MICR_COST_CNTR>
            <MICR_ROUTING_NBR>XXXXXXXXXXX</MICR_ROUTING_NBR>
            <MICR_FORMAT_ACTNBR>XXXXXXXXXXXXXXXXX</MICR_FORMAT_ACTNBR>
            <REORDER_POINT>XXXXX</REORDER_POINT>
            <REORDER_NUMBER_BKS>XXXXX</REORDER_NUMBER_BKS>
            <IMAGES_PER_PAGE>X</IMAGES_PER_PAGE>
            <NBR_FORMS_PER_BK>XXXXX</NBR_FORMS_PER_BK>
            <PART_PAPER_PER_FORM>X</PART_PAPER_PER_FORM>
            <NBR_DEP_TICKETS_PER_BK>XXXXX</NBR_DEP_TICKETS_PER_BK>
            <SHEETS_OF_PAPER_PER_BK>XXXXX</SHEETS_OF_PAPER_PER_BK>
            <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
            <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
            <LAST_MAINTENANCE_DATE>MM-DD-RRRR</LAST_MAINTENANCE_DATE>
            <LAST_MAINT_USER_ID>XXXXXX</LAST_MAINT_USER_ID>
            <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
        </BANK_MICR_FORMAT>
    </BANK_MICR_FORMAT_TABLE>
</ACCOUNT_MAINTENANCE_UI>

created : 05/18/2015 jxc517 CCN Project....
revised : 
*******************************************************************************/
    IN_ROW_DATA  IN  CLOB)
IS
BEGIN
    ACCOUNT_MAINTENANCE_PKG.ACCNT_MNTNC_UI_UPSERT_SP(IN_ROW_DATA);
EXCEPTION
    WHEN OTHERS THEN
        ERRPKG.RAISE_ERR(SQLCODE, 'ACCNT_MNTNC_UI_UPSERT_SP ' || SUBSTR(SQLERRM,1,500) || ' IN OTHERS ' );
END ACCNT_MNTNC_UI_UPSERT_SP;

PROCEDURE MEMBER_MNTNC_UI_UPSERT_SP(
/******************************************************************************
This procedure is intended to update following tables used in the Member Maintenance Window
    Tables: 
       MEMBER_BANK_CC
       MEMBER_BANK_CC_FUTURE

<?xml version="1.0" encoding="UTF-8" ?>
<MEMBER_CC_MAINTENANCE_UI xmlns:xsi="http://www.w3.org/2001/XMLSchema" xsi:nonamespaceSchemaLocation="http://www.oracle.com/Employee.xsd">
    <MEMBER_BANK_CC_TABLE>
        <MEMBER_BANK_CC>
            <BANK_ACCOUNT_NUMBER>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NUMBER>
            <LEAD_STORE_NBR>XXXXXX</LEAD_STORE_NBR>
            <MEMBER_STORE_NBR>XXXXXX</MEMBER_STORE_NBR>
            <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
            <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
            <BANK_BRANCH_NBR>XXXXXXXX</BANK_BRANCH_NBR>
            <UPDATE_DATE>MM-DD-RRRR</UPDATE_DATE>
            <LAST_UPD_USER_ID>XXXXXXXX</LAST_UPD_USER_ID>
            <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
        </MEMBER_BANK_CC>    
        <MEMBER_BANK_CC>
            <BANK_ACCOUNT_NUMBER>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NUMBER>
            <LEAD_STORE_NBR>XXXXXX</LEAD_STORE_NBR>
            <MEMBER_STORE_NBR>XXXXXX</MEMBER_STORE_NBR>
            <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
            <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
            <BANK_BRANCH_NBR>XXXXXXXX</BANK_BRANCH_NBR>
            <UPDATE_DATE>MM-DD-RRRR</UPDATE_DATE>
            <LAST_UPD_USER_ID>XXXXXXXX</LAST_UPD_USER_ID>
            <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
        </MEMBER_BANK_CC>  
        <MEMBER_BANK_CC>
            <BANK_ACCOUNT_NUMBER>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NUMBER>
            <LEAD_STORE_NBR>XXXXXX</LEAD_STORE_NBR>
            <MEMBER_STORE_NBR>XXXXXX</MEMBER_STORE_NBR>
            <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
            <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
            <BANK_BRANCH_NBR>XXXXXXXX</BANK_BRANCH_NBR>
            <UPDATE_DATE>MM-DD-RRRR</UPDATE_DATE>
            <LAST_UPD_USER_ID>XXXXXXXX</LAST_UPD_USER_ID>
            <FUTURE_ID>XXXXXXXXXXXXXXXXXXXXXX</FUTURE_ID>
        </MEMBER_BANK_CC>
    </MEMBER_BANK_CC_TABLE>
</MEMBER_CC_MAINTENANCE_UI>

created : 06/04/2015 sxh487 CCN Project....
revised : 06/25/2015 nxk927 CCN Project.... 
          added condition to raise error if the user enters the same LEAD and MEMBER combination in the UI. 
changed : 07/07/2015 nxk927 CCN Project.... 
          added business rules
*******************************************************************************/
    IN_ROW_DATA  IN  CLOB)
IS
    V_COUNT                         INTEGER;
    V_XML_MEMBER_BANK_CC_FRAG       CLOB;
    V_ROW_DATA                      XMLTYPE := SYS.XMLTYPE(IN_ROW_DATA);
    V_TEMP_ROW                      MEMBER_BANK_CC%ROWTYPE;
BEGIN
    MEMBER_MAINTENANCE_PKG.MEMBER_MNTNC_UI_UPSERT_SP(IN_ROW_DATA);
EXCEPTION
    WHEN OTHERS THEN
        ERRPKG.RAISE_ERR(SQLCODE, 'MEMBER_MNTNC_UI_UPSERT_SP ' || SUBSTR(SQLERRM,1,500));
END MEMBER_MNTNC_UI_UPSERT_SP;

PROCEDURE DEPOSIT_TICKET_UI_UPSERT_SP ( 
/******************************************************************************
This procedure is intended to update following tables used in the Deposit Ticket Window
    Tables: 
       BANK_DEP_TICK

<?xml version="1.0" encoding="UTF-8" ?>
<BANK_DEP_TICK_UI xmlns:xsi="http://www.w3.org/2001/XMLSchema" xsi:nonamespaceSchemaLocation="http://www.oracle.com/Employee.xsd">
    <BANK_DEP_TICK>
        <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
        <COST_CENTER_CODE>XXXXXX</COST_CENTER_CODE>
        <DAILY_USE_ACTUAL>XXX</DAILY_USE_ACTUAL>
        <DAILY_USE_OVERRIDE>XXX</DAILY_USE_OVERRIDE>
        <DEP_TKTS_ONHAND_QTY>XXXXX</DEP_TKTS_ONHAND_QTY>
        <YTD_DEP_TKTS_ORDERED_QTY>XXXXX</YTD_DEP_TKTS_ORDERED_QTY>
        <DJDE_FORM_PARM>XXXXXX</DJDE_FORM_PARM>
        <DJDE_FEED_PARM>XXXXX</DJDE_FEED_PARM>
        <MICR_COST_CNTR>XXXXXXXX</MICR_COST_CNTR>
        <MICR_ROUTING_NBR>XXXXXXXXXXX</MICR_ROUTING_NBR>
        <MICR_FORMAT_ACCT_NBR>XXXXXXXXXXXXXXXXX</MICR_FORMAT_ACCT_NBR>
        <REORDER_POINT>XXXXX</REORDER_POINT>
        <REORDER_NUMBER_BKS>XXXXX</REORDER_NUMBER_BKS>
        <IMAGES_PER_PAGE>X</IMAGES_PER_PAGE>
        <NBR_FORMS_PER_BK>XXXXX</NBR_FORMS_PER_BK>
        <PART_PAPER_PER_FORM>X</PART_PAPER_PER_FORM>
        <NBR_DEP_TICKETS_PER_BK>XXXXX</NBR_DEP_TICKETS_PER_BK>
        <SHEETS_OF_PAPER_PER_BK>XXXXX</SHEETS_OF_PAPER_PER_BK>
        <FORMAT_NAME>XXXXXX</FORMAT_NAME>
        <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
        <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
        <LAST_MAINTENANCE_DATE>MM-DD-RRRR</LAST_MAINTENANCE_DATE>
        <LAST_MAINT_USER_ID>XXXXXX</LAST_MAINT_USER_ID>
        <REORDER_SWITCH>X</REORDER_SWITCH>
        <LAST_VW_ORDER_DATE>MM-DD-RRRR</LAST_VW_ORDER_DATE>
    </BANK_DEP_TICK>
</BANK_DEP_TICK_UI>

created : 05/21/2015 jxc517 CCN Project....
revised : 
*******************************************************************************/
    IN_ROW_DATA  IN  CLOB)
IS
BEGIN
    DEPOSIT_TICKET_MAINTENANCE_PKG.DEPOSIT_TKT_MNTNC_UI_UPSERT_SP(IN_ROW_DATA);
EXCEPTION
    WHEN OTHERS THEN
        ERRPKG.RAISE_ERR(SQLCODE, 'DEPOSIT_TICKET_UI_UPSERT_SP ' || SUBSTR(SQLERRM,1,500) || ' IN OTHERS ' );
END DEPOSIT_TICKET_UI_UPSERT_SP;

PROCEDURE DEPOSIT_BAG_UPDT_UI_UPSERT_SP ( 
/******************************************************************************
This procedure is intended to update following tables used in the Deposit Bag Update Window
    Tables: 
       BANK_DEP_BAG_TICK

<?xml version="1.0" encoding="UTF-8" ?>
<BANK_DEP_BAG_TICK_UI xmlns:xsi="http://www.w3.org/2001/XMLSchema" xsi:nonamespaceSchemaLocation="http://www.oracle.com/Employee.xsd">
    <BANK_DEP_BAG_TICK>
        <BANK_ACCOUNT_NBR>XXXXXXXXXXXXXXXX</BANK_ACCOUNT_NBR>
        <COST_CENTER_CODE>XXXXXX</COST_CENTER_CODE>
        <DEPBAG_DAILY_USE_ACTUAL>XXXXX</DEPBAG_DAILY_USE_ACTUAL>
        <DEPBAG_DLY_USE_OVERRIDE>XXXXX</DEPBAG_DLY_USE_OVERRIDE>
        <DEPBAG_LAST_ORDER_DATE>MM-DD-RRRR</DEPBAG_LAST_ORDER_DATE>
        <DEPBAG_LAST_ORDER_QTY>XXXXX</DEPBAG_LAST_ORDER_QTY>
        <DEPBAG_ONHAND_QTY>XXXXX</DEPBAG_ONHAND_QTY>
        <DEPBAG_REORDER_QTY>XXXXX</DEPBAG_REORDER_QTY>
        <DEPBAG_YTD_ORDERED_QTY>XXXXX</DEPBAG_YTD_ORDERED_QTY>
        <DEP_BAG_REORDER_POINT>XXXXX</DEP_BAG_REORDER_POINT>
        <DEP_BAG_TYPE>X</DEP_BAG_TYPE>
        <DEP_BAG_REORDER_SWITCH>X</DEP_BAG_REORDER_SWITCH>
        <EFFECTIVE_DATE>MM-DD-RRRR</EFFECTIVE_DATE>
        <EXPIRATION_DATE>MM-DD-RRRR</EXPIRATION_DATE>
    </BANK_DEP_BAG_TICK>
</BANK_DEP_BAG_TICK_UI>

created : 05/21/2015 jxc517 CCN Project....
revised : 
*******************************************************************************/
    IN_ROW_DATA  IN  CLOB)
IS
BEGIN
    DEPOSIT_BAG_MAINTENANCE_PKG.DEPOSIT_BAG_UPDT_UI_UPSERT_SP(IN_ROW_DATA);
EXCEPTION
    WHEN OTHERS THEN
        ERRPKG.RAISE_ERR(SQLCODE, 'DEPOSIT_BAG_UPDT_UI_UPSERT_SP ' || SUBSTR(SQLERRM,1,500) || ' IN OTHERS ' );
END DEPOSIT_BAG_UPDT_UI_UPSERT_SP;

PROCEDURE LEAD_BANK_FROM_SP(
/*******************************************************************************
This procedure is intended to select records from Lead bank table including the 
members from the member bank table that we will be tranferred from.

Created : 06/05/2015 nxk927 CCN Project....
Changed : 
*******************************************************************************/
IN_COST_CENTER_CODE IN     VARCHAR2,
OUT_REF_CUR            OUT REF_CURSOR,
OUT_REF_CUR1           OUT REF_CURSOR)
IS
BEGIN
    CONCENTRATION_TRANSFER_PKG.LEAD_BANK_FROM_SP(IN_COST_CENTER_CODE,
                                                 OUT_REF_CUR,
                                                 OUT_REF_CUR1);
END LEAD_BANK_FROM_SP;

PROCEDURE LEAD_BANK_TO_SP(
/*******************************************************************************
This procedure is intended to select records from Lead bank table and the
member bank table that we will tranfer the records to.

Created : 06/05/2015 nxk927 CCN Project....
Changed : 07/08/2015 jxc517 CCN Project....
          Added condition to throw error if the "To Cost Center" entered is not a "I"/"L"
*******************************************************************************/
IN_COST_CENTER_CODE IN     VARCHAR2,
OUT_REF_CUR            OUT REF_CURSOR)
IS
BEGIN
   CONCENTRATION_TRANSFER_PKG.LEAD_BANK_TO_SP(IN_COST_CENTER_CODE,
                                              OUT_REF_CUR);
END LEAD_BANK_TO_SP;

PROCEDURE LEAD_TRANSFER_PROCESS(
/***********************************************************
This procedure is used to transfer member from one lead to another

This Procdedure does the following
1) Makes the new lead selected in the UI as the LEAD
2) Deletes the current lead from the Lead table and pushes to history
3) Deletes all the members from the Old Lead and pushes to history
4) Inserts the new cost center as the New Lead
5) Inserts all the members from the old Lead under the New lead

EXAMPLE INPUT:
<?XML VERSION="1.0" ENCODING="UTF-8"?>
<MEMBER_TRANSFER_UI>
    <USER_ID>XXXXXX</USER_ID>
    <FROM_LEAD_CC>701234</FROM_LEAD_CC>
    <TO_LEAD_CC>705678</TO_LEAD_CC>
    <MEMBER_STORES>
      <MEMBER>701451</MEMBER>
      <MEMBER>702000</MEMBER>
    </MEMBER_STORE>
</MEMBER_TRANSFER_UI>

Created : 06/09/2015 nxk927 CCN Project....
Changed : 07/02/2015 jxc517 CCN Project....
          Rewrote the logic for modularization
************************************************************/
IN_XML           CLOB)
IS
BEGIN
    CONCENTRATION_TRANSFER_PKG.LEAD_TRANSFER_PROCESS(IN_XML);
EXCEPTION
   WHEN OTHERS THEN
     ERRPKG.RAISE_ERR(SQLCODE, 'LEAD_TRANSFER_PROCESS, ' || ' ' || 'FAILED TO TRANSFER TO NEW LEAD - ' || SQLERRM);
END LEAD_TRANSFER_PROCESS;

PROCEDURE MAKE_LEAD_PROCESS(
/***********************************************************
This procedure is used to make a member with in a lead as "L" for
all the members under that lead

This Procdedure does the following
1) Makes the Member selected in the UI as the LEAD
2) Deletes the current lead from the Lead table and pushes to history
3) Deletes all the members from the Old Lead and pushes to history
4) Inserts the Member as the New Lead
5) Inserts all the members from the old Lead under the New lead

Created : 06/09/2015 nxk927 CCN Project....
Changed : 07/07/2015 jxc517 CCN Project....
          Rewrote the logic for modularization
************************************************************/
IN_NEW_LEAD_CC    IN     VARCHAR2,
IN_USER_ID        IN     VARCHAR2,
IN_EFFECTIVE_DATE IN     DATE)
IS
BEGIN
   CONCENTRATION_TRANSFER_PKG.MAKE_LEAD_PROCESS(IN_NEW_LEAD_CC,
                                                IN_USER_ID,
                                                IN_EFFECTIVE_DATE);
EXCEPTION
  WHEN OTHERS THEN
    ERRPKG.RAISE_ERR(SQLCODE, 'MAKE_LEAD_PROCESS, ' || ' ' || 'FAILED TO MAKE LEAD - ' || SQLERRM);
END MAKE_LEAD_PROCESS;

PROCEDURE ACCNT_MNTNC_UI_DELETE_SP(
/***********************************************************
This procedure is used to delete the bank accounts future records
based on the future id and bank account number that are passed as inputs

Created : 07/13/2015 jxc517 CCN Project....
Changed :
************************************************************/
    IN_BANK_ACCOUNT_NUMBER  IN  VARCHAR2,
    IN_FUTURE_ID            IN  NUMBER,
    IN_USER_ID              IN  VARCHAR2)
IS
BEGIN
    ACCOUNT_MAINTENANCE_PKG.ACCNT_MNTNC_UI_DELETE_SP(IN_BANK_ACCOUNT_NUMBER,
                                                     IN_FUTURE_ID,
                                                     IN_USER_ID);
EXCEPTION
  WHEN OTHERS THEN
    ERRPKG.RAISE_ERR(SQLCODE, 'ACCNT_MNTNC_UI_DELETE_SP ' || SUBSTR(SQLERRM,1,500) || ' IN OTHERS ' );
END ACCNT_MNTNC_UI_DELETE_SP;

END BANKING_UI_INTERFACE_APP_PKG;

