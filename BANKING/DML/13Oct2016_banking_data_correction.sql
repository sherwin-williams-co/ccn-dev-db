/*
This script will remove one of the future member 703993 from lead 701200
and add it back to its original lead 701399

audit - not sure how to handle so will see after the update

Created : 10/13/2016 jxc517 CCN Project Team....
*/

/*
SELECT * FROM USER_TABLES ORDER BY 1;

SELECT * FROM LEAD_BANK_CC_HIST WHERE LEAD_STORE_NBR = '703993';
SELECT * FROM LEAD_BANK_CC WHERE LEAD_STORE_NBR = '703993';
SELECT * FROM LEAD_BANK_CC_FUTURE WHERE LEAD_STORE_NBR = '703993';

SELECT * FROM MEMBER_BANK_CC_HIST WHERE MEMBER_STORE_NBR = '703993';
SELECT * FROM MEMBER_BANK_CC WHERE MEMBER_STORE_NBR = '703993';
SELECT * FROM MEMBER_BANK_CC_FUTURE WHERE MEMBER_STORE_NBR = '703993';

SELECT * FROM STORE_MICR_FORMAT_DTLS_HIST WHERE COST_CENTER_CODE = '703993';
SELECT * FROM STORE_MICR_FORMAT_DTLS WHERE COST_CENTER_CODE = '703993';
SELECT * FROM STORE_MICR_FORMAT_DTLS_FUTURE WHERE COST_CENTER_CODE = '703993';

SELECT * FROM BANK_DEP_TICK_HIST WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_TICK WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';

SELECT * FROM BANK_DEP_TICKORD_HIST WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_TICKORD WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_TICKORD_FUTURE WHERE COST_CENTER_CODE = '703993';

SELECT * FROM BANK_DEP_BAG_TICK_HIST WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_BAG_TICK WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_BAG_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';

SELECT * FROM BANK_DEP_BAG_TICKORD_HIST WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_BAG_TICKORD WHERE COST_CENTER_CODE = '703993';
SELECT * FROM BANK_DEP_BAG_TICKORD_FUTURE WHERE COST_CENTER_CODE = '703993';
*/

--triggers for below tables
--unexpire for old lead
SELECT * FROM MEMBER_BANK_CC WHERE MEMBER_STORE_NBR = '703993';
--1 Row(s) Selected
UPDATE MEMBER_BANK_CC SET EXPIRATION_DATE = NULL WHERE MEMBER_STORE_NBR = '703993' AND LEAD_STORE_NBR = '701399';
--1 Row(s) Updated

--delete for new future lead
SELECT * FROM MEMBER_BANK_CC_FUTURE WHERE MEMBER_STORE_NBR = '703993';
--1 Row(s) Selected
DELETE FROM MEMBER_BANK_CC_FUTURE WHERE MEMBER_STORE_NBR = '703993' AND LEAD_STORE_NBR = '701200';
--1 Row(s) Deleted

--unexpire old store micr details
SELECT * FROM STORE_MICR_FORMAT_DTLS WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
UPDATE STORE_MICR_FORMAT_DTLS SET EXPIRATION_DATE = NULL WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Updated

--no triggers for below tables
--unexpire old bank ticket details
SELECT * FROM BANK_DEP_TICK WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
UPDATE BANK_DEP_TICK SET EXPIRATION_DATE = NULL WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Updated

--delete new bank ticket details
SELECT * FROM BANK_DEP_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
DELETE FROM BANK_DEP_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Deleted

--unexpire old bank ticket order details
SELECT * FROM BANK_DEP_TICKORD WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
UPDATE BANK_DEP_TICKORD SET EXPIRATION_DATE = NULL WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Updated

--unexpire old bank bag details
SELECT * FROM BANK_DEP_BAG_TICK WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
UPDATE BANK_DEP_BAG_TICK SET EXPIRATION_DATE = NULL WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Updated

--delete new bank bag details
SELECT * FROM BANK_DEP_BAG_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
DELETE FROM BANK_DEP_BAG_TICK_FUTURE WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Deleted

--unexpire old bank bag order details
SELECT * FROM BANK_DEP_BAG_TICKORD WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Selected
UPDATE BANK_DEP_BAG_TICKORD SET EXPIRATION_DATE = NULL WHERE COST_CENTER_CODE = '703993';
--1 Row(s) Updated

COMMIT;

/*
audit sent details:
20161011173848703993MEMBER_BANK_CC           00000000160819C2079900579055   7013997039932014062820161017                    ~                       
20161011173848703993MEMBER_BANK_CC_FUTURE    00000000160820A3750023981      70120070399320161018~       ~                   ~       20161011LXB8VR  1                     
20161011173929703993STORE_MICR_FORMAT_DTLS   00000000160628C                                          703993                                    2014062820161017
*/