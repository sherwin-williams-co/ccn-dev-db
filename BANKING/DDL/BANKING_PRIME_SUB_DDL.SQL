/*
This script contains the DDLs for intermediate tables to hold the prime sub header/details reference data

Also we will load MISCTRAN_DETAILS table daily from MISCTRAN table for Julio's view alone

Created : 10/10/2016 jxc517 CCN Project Team....
*/
BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE PRIME_SUB_HEADER';
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/

CREATE TABLE PRIME_SUB_HEADER (
TCODE         VARCHAR2(4),
CATEGORY      VARCHAR2(3),
CODE          VARCHAR2(9),
NAME          VARCHAR2(100),
CONSTRAINT PRIME_SUB_HEADER_PK PRIMARY KEY (TCODE)
);
/

BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE PRIME_SUB_DETAIL';
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
CREATE TABLE PRIME_SUB_DETAIL (
TCODE                      VARCHAR2(4),
DB_CR_CODE                 VARCHAR2(2),
PRIME_SUB                  VARCHAR2(10),
DIVISION                   VARCHAR2(3),
PRIME_SUB_COST_CENTER      VARCHAR2(4),
CONSTRAINT PRIME_SUB_DETAIL_PK PRIMARY KEY (TCODE, DB_CR_CODE),
FOREIGN KEY (TCODE) REFERENCES PRIME_SUB_HEADER(TCODE)
);
/

BEGIN
  EXECUTE IMMEDIATE 'DROP TABLE MISCTRAN_DETAILS';
EXCEPTION
    WHEN OTHERS THEN
        NULL;
END;
/
CREATE TABLE MISCTRAN_DETAILS (
BANK_ACCOUNT_NBR      VARCHAR2(20),
COST_CENTER_CODE      VARCHAR2(6),
AMOUNT                VARCHAR2(12),
TRANSACTION_DATE      DATE,
TCODE                 VARCHAR2(4),
TCODE_DESCRIPTION     VARCHAR2(100),
TRAN_SEQNUM           VARCHAR2(9),
DB_CR_CODE            VARCHAR2(2),
SNZ_SAM_CODE          VARCHAR2(3),
LOAD_DATE             DATE,
PRIME_SUB             VARCHAR2(15),
JV_BOOK_KEEPER_REF    VARCHAR2(6),
JV_BANK_SHORT_NAME    VARCHAR2(6),
IDI_BOOKKEEPER_REF    VARCHAR2(6),
IDI_BANK_SHORT_NAME   VARCHAR2(6)
);
/
